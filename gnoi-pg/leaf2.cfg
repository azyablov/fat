    acl {
        cpm-filter {
            ipv4-filter {
                statistics-per-entry true
                entry 10 {
                    description "Accept incoming ICMP unreachable messages"
                    action {
                        accept {
                            rate-limit {
                                system-cpu-policer icmp
                            }
                        }
                    }
                    match {
                        protocol icmp
                        icmp {
                            type dest-unreachable
                            code [
                                0
                                1
                                2
                                3
                                4
                                13
                            ]
                        }
                    }
                }
                entry 20 {
                    description "Accept incoming ICMP time-exceeded messages"
                    action {
                        accept {
                            rate-limit {
                                system-cpu-policer icmp
                            }
                        }
                    }
                    match {
                        protocol icmp
                        icmp {
                            type time-exceeded
                        }
                    }
                }
                entry 30 {
                    description "Accept incoming ICMP parameter problem messages"
                    action {
                        accept {
                            rate-limit {
                                system-cpu-policer icmp
                            }
                        }
                    }
                    match {
                        protocol icmp
                        icmp {
                            type param-problem
                        }
                    }
                }
                entry 40 {
                    description "Accept incoming ICMP echo messages"
                    action {
                        accept {
                            rate-limit {
                                system-cpu-policer icmp
                            }
                        }
                    }
                    match {
                        protocol icmp
                        icmp {
                            type echo
                        }
                    }
                }
                entry 50 {
                    description "Accept incoming ICMP echo-reply messages"
                    action {
                        accept {
                            rate-limit {
                                system-cpu-policer icmp
                            }
                        }
                    }
                    match {
                        protocol icmp
                        icmp {
                            type echo-reply
                        }
                    }
                }
                entry 60 {
                    description "Accept incoming SSH when the other host initiates the TCP connection"
                    action {
                        accept {
                        }
                    }
                    match {
                        protocol tcp
                        destination-port {
                            operator eq
                            value 22
                        }
                    }
                }
                entry 70 {
                    description "Accept incoming SSH when this router initiates the TCP connection"
                    action {
                        accept {
                        }
                    }
                    match {
                        protocol tcp
                        source-port {
                            operator eq
                            value 22
                        }
                    }
                }
                entry 80 {
                    description "Accept incoming Telnet when the other host initiates the TCP connection"
                    action {
                        accept {
                        }
                    }
                    match {
                        protocol tcp
                        destination-port {
                            operator eq
                            value 23
                        }
                    }
                }
                entry 90 {
                    description "Accept incoming Telnet when this router initiates the TCP connection"
                    action {
                        accept {
                        }
                    }
                    match {
                        protocol tcp
                        source-port {
                            operator eq
                            value 23
                        }
                    }
                }
                entry 100 {
                    description "Accept incoming TACACS+ when the other host initiates the TCP connection"
                    action {
                        accept {
                        }
                    }
                    match {
                        protocol tcp
                        destination-port {
                            operator eq
                            value 49
                        }
                    }
                }
                entry 110 {
                    description "Accept incoming TACACS+ when this router initiates the TCP connection"
                    action {
                        accept {
                        }
                    }
                    match {
                        protocol tcp
                        source-port {
                            operator eq
                            value 49
                        }
                    }
                }
                entry 120 {
                    description "Accept incoming DNS response messages"
                    action {
                        accept {
                        }
                    }
                    match {
                        protocol udp
                        source-port {
                            operator eq
                            value 53
                        }
                    }
                }
                entry 130 {
                    description "Accept incoming DHCP messages targeted for BOOTP/DHCP client"
                    action {
                        accept {
                        }
                    }
                    match {
                        protocol udp
                        destination-port {
                            operator eq
                            value 68
                        }
                    }
                }
                entry 140 {
                    description "Accept incoming TFTP read-request and write-request messages"
                    action {
                        accept {
                        }
                    }
                    match {
                        protocol udp
                        destination-port {
                            operator eq
                            value 69
                        }
                    }
                }
                entry 150 {
                    description "Accept incoming HTTP(JSON-RPC) when the other host initiates the TCP connection"
                    action {
                        accept {
                        }
                    }
                    match {
                        protocol tcp
                        destination-port {
                            operator eq
                            value 80
                        }
                    }
                }
                entry 160 {
                    description "Accept incoming HTTP(JSON-RPC) when this router initiates the TCP connection"
                    action {
                        accept {
                        }
                    }
                    match {
                        protocol tcp
                        source-port {
                            operator eq
                            value 80
                        }
                    }
                }
                entry 170 {
                    description "Accept incoming NTP messages from servers"
                    action {
                        accept {
                        }
                    }
                    match {
                        protocol udp
                        source-port {
                            operator eq
                            value 123
                        }
                    }
                }
                entry 180 {
                    description "Accept incoming SNMP GET/GETNEXT messages from servers"
                    action {
                        accept {
                        }
                    }
                    match {
                        protocol udp
                        destination-port {
                            operator eq
                            value 161
                        }
                    }
                }
                entry 190 {
                    description "Accept incoming BGP when the other router initiates the TCP connection"
                    action {
                        accept {
                        }
                    }
                    match {
                        protocol tcp
                        destination-port {
                            operator eq
                            value 179
                        }
                    }
                }
                entry 200 {
                    description "Accept incoming BGP when this router initiates the TCP connection"
                    action {
                        accept {
                        }
                    }
                    match {
                        protocol tcp
                        source-port {
                            operator eq
                            value 179
                        }
                    }
                }
                entry 210 {
                    description "Accept incoming HTTPS(JSON-RPC) when the other host initiates the TCP connection"
                    action {
                        accept {
                        }
                    }
                    match {
                        protocol tcp
                        destination-port {
                            operator eq
                            value 443
                        }
                    }
                }
                entry 220 {
                    description "Accept incoming HTTPS(JSON-RPC) when this router initiates the TCP connection"
                    action {
                        accept {
                        }
                    }
                    match {
                        protocol tcp
                        source-port {
                            operator eq
                            value 443
                        }
                    }
                }
                entry 230 {
                    description "Accept incoming single-hop BFD session messages"
                    action {
                        accept {
                        }
                    }
                    match {
                        protocol udp
                        destination-port {
                            operator eq
                            value 3784
                        }
                    }
                }
                entry 240 {
                    description "Accept incoming multi-hop BFD session messages"
                    action {
                        accept {
                        }
                    }
                    match {
                        protocol udp
                        destination-port {
                            operator eq
                            value 4784
                        }
                    }
                }
                entry 250 {
                    description "Accept incoming uBFD session messages"
                    action {
                        accept {
                        }
                    }
                    match {
                        protocol udp
                        destination-port {
                            operator eq
                            value 6784
                        }
                    }
                }
                entry 260 {
                    description "Accept incoming gNMI messages when the other host initiates the TCP connection"
                    action {
                        accept {
                        }
                    }
                    match {
                        protocol tcp
                        destination-port {
                            operator eq
                            value 57400
                        }
                    }
                }
                entry 270 {
                    description "Accept incoming UDP traceroute messages"
                    action {
                        accept {
                        }
                    }
                    match {
                        protocol udp
                        destination-port {
                            range {
                                start 33434
                                end 33464
                            }
                        }
                    }
                }
                entry 280 {
                    description "Accept incoming ICMP timestamp messages"
                    action {
                        accept {
                            rate-limit {
                                system-cpu-policer icmp
                            }
                        }
                    }
                    match {
                        protocol icmp
                        icmp {
                            type timestamp
                        }
                    }
                }
                entry 290 {
                    description "Accept incoming OSPF messages"
                    action {
                        accept {
                        }
                    }
                    match {
                        protocol 89
                    }
                }
                entry 300 {
                    description "Accept incoming DHCP relay messages targeted for BOOTP/DHCP server"
                    action {
                        accept {
                        }
                    }
                    match {
                        protocol udp
                        destination-port {
                            operator eq
                            value 67
                        }
                    }
                }
                entry 310 {
                    description "Accept ICMP fragment packets"
                    action {
                        accept {
                            rate-limit {
                                system-cpu-policer icmp
                            }
                        }
                    }
                    match {
                        fragment true
                        protocol icmp
                    }
                }
                entry 320 {
                    description "Accept incoming LDP packets"
                    action {
                        accept {
                        }
                    }
                    match {
                        protocol udp
                        source-port {
                            operator eq
                            value 646
                        }
                    }
                }
                entry 330 {
                    description "Accept incoming LDP packets with source-port 646"
                    action {
                        accept {
                        }
                    }
                    match {
                        protocol tcp
                        source-port {
                            operator eq
                            value 646
                        }
                    }
                }
                entry 340 {
                    description "Accept incoming LDP packets with destination-port 646"
                    action {
                        accept {
                        }
                    }
                    match {
                        protocol tcp
                        destination-port {
                            operator eq
                            value 646
                        }
                    }
                }
                entry 350 {
                    description "Accept incoming gRIBI packets with destination-port 57401"
                    action {
                        accept {
                        }
                    }
                    match {
                        protocol tcp
                        destination-port {
                            operator eq
                            value 57401
                        }
                    }
                }
                entry 360 {
                    description "Accept incoming p4rt packets with destination-port 9559"
                    action {
                        accept {
                        }
                    }
                    match {
                        protocol tcp
                        destination-port {
                            operator eq
                            value 9559
                        }
                    }
                }
                entry 370 {
                    description "Accept incoming IGMP packets"
                    action {
                        accept {
                        }
                    }
                    match {
                        protocol igmp
                    }
                }
                entry 380 {
                    description "Drop all else"
                    action {
                        drop {
                            log true
                        }
                    }
                }
            }
            ipv6-filter {
                statistics-per-entry true
                entry 10 {
                    description "Accept incoming ICMPv6 unreachable messages"
                    action {
                        accept {
                            rate-limit {
                                system-cpu-policer icmp
                            }
                        }
                    }
                    match {
                        next-header icmp6
                        icmp6 {
                            type dest-unreachable
                            code [
                                0
                                1
                                2
                                3
                                4
                                5
                                6
                            ]
                        }
                    }
                }
                entry 20 {
                    description "Accept incoming ICMPv6 packet-too-big messages"
                    action {
                        accept {
                            rate-limit {
                                system-cpu-policer icmp
                            }
                        }
                    }
                    match {
                        next-header icmp6
                        icmp6 {
                            type packet-too-big
                        }
                    }
                }
                entry 30 {
                    description "Accept incoming ICMPv6 time-exceeded messages"
                    action {
                        accept {
                            rate-limit {
                                system-cpu-policer icmp
                            }
                        }
                    }
                    match {
                        next-header icmp6
                        icmp6 {
                            type time-exceeded
                        }
                    }
                }
                entry 40 {
                    description "Accept incoming ICMPv6 parameter problem messages"
                    action {
                        accept {
                            rate-limit {
                                system-cpu-policer icmp
                            }
                        }
                    }
                    match {
                        next-header icmp6
                        icmp6 {
                            type param-problem
                        }
                    }
                }
                entry 50 {
                    description "Accept incoming ICMPv6 echo-request messages"
                    action {
                        accept {
                            rate-limit {
                                system-cpu-policer icmp
                            }
                        }
                    }
                    match {
                        next-header icmp6
                        icmp6 {
                            type echo-request
                        }
                    }
                }
                entry 60 {
                    description "Accept incoming ICMPv6 echo-reply messages"
                    action {
                        accept {
                            rate-limit {
                                system-cpu-policer icmp
                            }
                        }
                    }
                    match {
                        next-header icmp6
                        icmp6 {
                            type echo-reply
                        }
                    }
                }
                entry 70 {
                    description "Accept incoming ICMPv6 router-advertisement messages"
                    action {
                        accept {
                            rate-limit {
                                system-cpu-policer icmp
                            }
                        }
                    }
                    match {
                        next-header icmp6
                        icmp6 {
                            type router-advertise
                        }
                    }
                }
                entry 80 {
                    description "Accept incoming ICMPv6 neighbor-solicitation messages"
                    action {
                        accept {
                            rate-limit {
                                system-cpu-policer icmp
                            }
                        }
                    }
                    match {
                        next-header icmp6
                        icmp6 {
                            type neighbor-solicit
                        }
                    }
                }
                entry 90 {
                    description "Accept incoming ICMPv6 neighbor-advertisement messages"
                    action {
                        accept {
                            rate-limit {
                                system-cpu-policer icmp
                            }
                        }
                    }
                    match {
                        next-header icmp6
                        icmp6 {
                            type neighbor-advertise
                        }
                    }
                }
                entry 100 {
                    description "Accept incoming SSH when the other host initiates the TCP connection"
                    action {
                        accept {
                        }
                    }
                    match {
                        next-header tcp
                        destination-port {
                            operator eq
                            value 22
                        }
                    }
                }
                entry 110 {
                    description "Accept incoming SSH when this router initiates the TCP connection"
                    action {
                        accept {
                        }
                    }
                    match {
                        next-header tcp
                        source-port {
                            operator eq
                            value 22
                        }
                    }
                }
                entry 120 {
                    description "Accept incoming Telnet when the other host initiates the TCP connection"
                    action {
                        accept {
                        }
                    }
                    match {
                        next-header tcp
                        destination-port {
                            operator eq
                            value 23
                        }
                    }
                }
                entry 130 {
                    description "Accept incoming Telnet when this router initiates the TCP connection"
                    action {
                        accept {
                        }
                    }
                    match {
                        next-header tcp
                        source-port {
                            operator eq
                            value 23
                        }
                    }
                }
                entry 140 {
                    description "Accept incoming TACACS+ when the other host initiates the TCP connection"
                    action {
                        accept {
                        }
                    }
                    match {
                        next-header tcp
                        destination-port {
                            operator eq
                            value 49
                        }
                    }
                }
                entry 150 {
                    description "Accept incoming TACACS+ when this router initiates the TCP connection"
                    action {
                        accept {
                        }
                    }
                    match {
                        next-header tcp
                        source-port {
                            operator eq
                            value 49
                        }
                    }
                }
                entry 160 {
                    description "Accept incoming DNS response messages"
                    action {
                        accept {
                        }
                    }
                    match {
                        next-header udp
                        source-port {
                            operator eq
                            value 53
                        }
                    }
                }
                entry 170 {
                    description "Accept incoming TFTP read-request and write-request messages"
                    action {
                        accept {
                        }
                    }
                    match {
                        next-header udp
                        destination-port {
                            operator eq
                            value 69
                        }
                    }
                }
                entry 180 {
                    description "Accept incoming HTTP(JSON-RPC) when the other host initiates the TCP connection"
                    action {
                        accept {
                        }
                    }
                    match {
                        next-header tcp
                        destination-port {
                            operator eq
                            value 80
                        }
                    }
                }
                entry 190 {
                    description "Accept incoming HTTP(JSON-RPC) when this router initiates the TCP connection"
                    action {
                        accept {
                        }
                    }
                    match {
                        next-header tcp
                        source-port {
                            operator eq
                            value 80
                        }
                    }
                }
                entry 200 {
                    description "Accept incoming NTP messages from servers"
                    action {
                        accept {
                        }
                    }
                    match {
                        next-header udp
                        source-port {
                            operator eq
                            value 123
                        }
                    }
                }
                entry 210 {
                    description "Accept incoming SNMP GET/GETNEXT messages from servers"
                    action {
                        accept {
                        }
                    }
                    match {
                        next-header udp
                        destination-port {
                            operator eq
                            value 161
                        }
                    }
                }
                entry 220 {
                    description "Accept incoming BGP when the other router initiates the TCP connection"
                    action {
                        accept {
                        }
                    }
                    match {
                        next-header tcp
                        destination-port {
                            operator eq
                            value 179
                        }
                    }
                }
                entry 230 {
                    description "Accept incoming BGP when this router initiates the TCP connection"
                    action {
                        accept {
                        }
                    }
                    match {
                        next-header tcp
                        source-port {
                            operator eq
                            value 179
                        }
                    }
                }
                entry 240 {
                    description "Accept incoming HTTPS(JSON-RPC) when the other host initiates the TCP connection"
                    action {
                        accept {
                        }
                    }
                    match {
                        next-header tcp
                        destination-port {
                            operator eq
                            value 443
                        }
                    }
                }
                entry 250 {
                    description "Accept incoming HTTPS(JSON-RPC) when this router initiates the TCP connection"
                    action {
                        accept {
                        }
                    }
                    match {
                        next-header tcp
                        source-port {
                            operator eq
                            value 443
                        }
                    }
                }
                entry 260 {
                    description "Accept incoming DHCPv6 client messages"
                    action {
                        accept {
                        }
                    }
                    match {
                        next-header udp
                        destination-port {
                            operator eq
                            value 546
                        }
                    }
                }
                entry 270 {
                    description "Accept incoming single-hop BFD session messages"
                    action {
                        accept {
                        }
                    }
                    match {
                        next-header udp
                        destination-port {
                            operator eq
                            value 3784
                        }
                    }
                }
                entry 280 {
                    description "Accept incoming multi-hop BFD session messages"
                    action {
                        accept {
                        }
                    }
                    match {
                        next-header udp
                        destination-port {
                            operator eq
                            value 4784
                        }
                    }
                }
                entry 290 {
                    description "Accept incoming uBFD session messages"
                    action {
                        accept {
                        }
                    }
                    match {
                        next-header udp
                        destination-port {
                            operator eq
                            value 6784
                        }
                    }
                }
                entry 300 {
                    description "Accept incoming gNMI messages when the other host initiates the TCP connection"
                    action {
                        accept {
                        }
                    }
                    match {
                        next-header tcp
                        destination-port {
                            operator eq
                            value 57400
                        }
                    }
                }
                entry 310 {
                    description "Accept incoming UDP traceroute messages"
                    action {
                        accept {
                        }
                    }
                    match {
                        next-header udp
                        destination-port {
                            range {
                                start 33434
                                end 33464
                            }
                        }
                    }
                }
                entry 320 {
                    description "Accept incoming IPV6 hop-in-hop messages"
                    action {
                        accept {
                        }
                    }
                    match {
                        next-header 0
                    }
                }
                entry 330 {
                    description "Accept incoming IPV6 fragment header messages"
                    action {
                        accept {
                        }
                    }
                    match {
                        next-header 44
                    }
                }
                entry 340 {
                    description "Accept incoming OSPF messages"
                    action {
                        accept {
                        }
                    }
                    match {
                        next-header 89
                    }
                }
                entry 350 {
                    description "Accept incoming DHCPv6 relay messages"
                    action {
                        accept {
                        }
                    }
                    match {
                        next-header udp
                        destination-port {
                            operator eq
                            value 547
                        }
                    }
                }
                entry 360 {
                    description "Accept incoming gRIBI packets with destination-port 57401"
                    action {
                        accept {
                        }
                    }
                    match {
                        next-header tcp
                        destination-port {
                            operator eq
                            value 57401
                        }
                    }
                }
                entry 370 {
                    description "Accept incoming p4rt packets with destination-port 9559"
                    action {
                        accept {
                        }
                    }
                    match {
                        next-header tcp
                        destination-port {
                            operator eq
                            value 9559
                        }
                    }
                }
                entry 380 {
                    description "Accept incoming IGMP packets"
                    action {
                        accept {
                        }
                    }
                    match {
                        next-header igmp
                    }
                }
                entry 390 {
                    description "Drop all else"
                    action {
                        drop {
                            log true
                        }
                    }
                }
            }
        }
        policers {
            system-cpu-policer icmp {
                entry-specific false
                peak-packet-rate 1000
                max-packet-burst 1000
            }
        }
    }
    bfd {
        subinterface system0.0 {
            admin-state enable
            desired-minimum-transmit-interval 1000000
            required-minimum-receive 1000000
            detection-multiplier 3
            minimum-echo-receive-interval 0
        }
    }
    interface ethernet-1/1 {
        description "to spine1"
        admin-state enable
        vlan-tagging true
        ethernet {
            port-speed 10G
        }
        subinterface 1 {
            admin-state enable
            ipv4 {
                address 10.1.2.4/31 {
                }
            }
            vlan {
                encap {
                    single-tagged {
                        vlan-id 1
                    }
                }
            }
        }
        sflow {
            admin-state disable
        }
    }
    interface ethernet-1/2 {
        description "to spine2"
        admin-state enable
        vlan-tagging true
        ethernet {
            port-speed 10G
        }
        subinterface 1 {
            admin-state enable
            ipv4 {
                address 10.1.2.6/31 {
                }
            }
            vlan {
                encap {
                    single-tagged {
                        vlan-id 1
                    }
                }
            }
        }
        sflow {
            admin-state disable
        }
    }
    interface ethernet-1/10 {
        description client2
        admin-state enable
        ethernet {
            aggregate-id lag1
            lacp-port-priority 2
            reload-delay 20
        }
    }
    interface lag1 {
        admin-state enable
        vlan-tagging true
        ethernet {
            standby-signaling lacp
        }
        subinterface 0 {
            type bridged
            vlan {
                encap {
                    untagged {
                    }
                }
            }
        }
        lag {
            lag-type lacp
            min-links 1
            member-speed 100G
            lacp-fallback-mode static
            lacp-fallback-timeout 10
            lacp {
                interval FAST
                lacp-mode ACTIVE
                admin-key 3
                system-id-mac 0A:00:00:03:00:01
                system-priority 1
            }
        }
    }
    interface mgmt0 {
        admin-state enable
        subinterface 0 {
            admin-state enable
            ipv4 {
                dhcp-client {
                }
            }
            ipv6 {
                dhcp-client {
                }
            }
        }
    }
    interface system0 {
        description system
        subinterface 0 {
            description system
            admin-state enable
            ipv4 {
                address 10.0.0.2/32 {
                }
            }
        }
    }
    system {
        aaa {
            authentication {
                idle-timeout 7200
                authentication-method [
                    local
                ]
            }
            server-group local {
                type local
            }
        }
        lldp {
            admin-state enable
        }
        gnmi-server {
            admin-state enable
            network-instance mgmt {
                admin-state enable
                tls-profile clab-profile
            }
            unix-socket {
                admin-state enable
            }
        }
        tls {
            server-profile clab-profile {
                key $aes$fqtgdd+7d/QQ=$Odah4zt9lvFLTarRNAaQ8Y/6QAy2YJJmvLE5Bkr81FYnRE6NuxruqXJ0PNCsjN1b6GQLQxsqovaLqqvCOr00aglTV+Or0vWUmME0S38LNELxVBOuD3IYs8lipFA6vhE0nauFyf1r0FORDfWIi6SAOmxMax2aW2SPIsI57ppY8VmNou68YDZgjSyrgycNN1TlsB5ErfauhysG1QA5uobMYmlg5bRPtZUSCNPOUeER949dTcVTcOIIFbuMqwEPyrXg2vBwfOM1Ml8BXqbqFjwXEIMvQokMiMPSgURw1n6DmdUPuZjkx0Py3kshMVp4skCqYX4RFlxJTO3JtaBvThz1ZlA+ZZjOC/ECFY/pB8PsnrDLG6GuNiAwGLk4XlFFLkuRHd/oif65cUBMRggfeDLi12sqj0sY8nlDQ2UR1CK36VXX/UqkQ/2TzYDqI4BpjqHlHsje8FeGSrxun1NuUnYZr/dSg6rjCPAqHS8Ha4ezVcPDADiK/jWosNJciIYCBbc6GErYd6a8H/1vaNGnE0Lr44aPRfblZn9gfq+gHsyK3aJBH2xm97Rp5bFGL4GaqaaoecfZMR6Zl1lEAJcJUOAraOSkU9NV0O5jLaQXYPsN6JU6RglaWXNtuqRd1z06ACQOE8Rr8FCaZpej/awIzCKIraYLajR6jbRtEzBXR+/4bEmxVBX05hL5Q0y9TZj01nfCNJjodU3r5B4D6wNEF52ezQFKw2+xtcGYKTJ/t6MelU+T0CPgFqQ6e3DPTcMvzdDgVk1Tg1RHf+8OmBkCfLSYdWCQegAx9sm05CcQ2ovLOajxBZtAlHu3t4omznsIQ1/2Vvc5ljzfAaxYHVhHYeNUyDUilp7EK6oDxbHzLoBJgnrg62FM2mNSjDMia8W3cF588VPj6bQ3voPpjs/uvTprkVctZDrL5upHAsimgdDJjoIZKVaJZqEuB9aisHR+LGavJCQYbKgM44195zjj2FVGYN5E9Z2rQ+X7ul+44OdneG9VkAhn8HT9+FqfYS4a1z8yQsyOnBAKTzMAZRyxiv3tI/sU64xSSMGEqN6NBcfLV4Vn39gln4Vk+La6aKqxAx/e4tqRNWeh3OfnwtnM/1r0uwNigMHVIy2eoO5shW4ZfroEy7XflUj6YyXNEd141OhdJG5f2ngOATV0drQI7nHvh5oBIV1ib+cG0+5HNeUZ3JSU22YGQWtiZ4CzAirCmhsVDmRE619T+aM01caU8UQNvtZEFMnRrEDyMVlbQaBrCORT/yhwSx5kLryeX3Rxv0gy3aVBo86fd/0fF0UEMiYc9cUbDM/RHo62du7UX66fGKrU2vfRWl29ohvIvJJZ3pvqv+QFdqJpoyx6fV52iSIIal97YySEBZgVHDYtDKEzp5cJbC4M1Y57AOx4hgmv5lvmuQIKRXQgpyx9SqUQYIVbmSLCw2TVs3ehpgK1xqjZftUPWyQuWUAZIC95k+2GoHPTl7Wwu8i7ifjp2guvdAXMxlVVzy9ElAe40+IL/9eFOSdPaSdbSFMYCYdgqcVZiasmBVaOeWcNQZMN8zDyBe4NdrMU2POI1ZE5bOw8p4JbQwJpGmOVAYIdrh80TBNA29pYB3PBKCPijl1mLuB0A+tWg2kimPHlNuuwETLgMIQKr3Bi2Jhzw8ImWVW1fXtbi8lvgHY9ek8TL8KoLNVqRzGy0k7GsSDc0/ja6UIA2nPkMjWTwUgL1krSdps6O9qz4WeZ9NrNXh5xzqWXFQTOx06QPtRaV4rMnc/mTkGbIdnD9kaHA3yDHDjx4qwTtlUKqz18waSwtN+DDj1lcki6h1Efhusp/XVP0pxgk/99UWWLHvfjCxyvrvCi9U0ntoeA3mTPVKce7ZlejCNKmYJ/wtfzSGUwqK2b9/fwvVW4wKoA+LC7uOb0pM88E08tFsysX6ymlR7ru0Nw0LVJB4j1dNdLca2oD1KzjJfXyEoMwvx9jnX4UVfExXO82x0OOB+UGB9Q6y/pxR6lbX22zRSuJ4irjtiDjtEnjYOkEgK7nZLc+46/Llo/zfPBhDehGTT2fLmLdO1k2cSA3JyVnjxPqAOjKLLJdYk6eTaIlj/dTYv9c9RlE0dfluxQRndjNcThbjt3DcXB51sdBe1D+rYNGG+08OT0z/bozJveZHDSM5L8y5yZD/uo+QUR8T184us3EGJmTplvvNfpg5pqByg4fZ017zeS/ROHtugb9kaUluHJn3TRvvmR+jBUTTvDrT+N7f1T
                certificate "-----BEGIN CERTIFICATE-----
MIID8TCCAtmgAwIBAgIUfcV8JjWahpvhNL3w4tbAzqp2J7gwDQYJKoZIhvcNAQEL
BQAwXTELMAkGA1UEBhMCQkUxEDAOBgNVBAcTB0FudHdlcnAxDjAMBgNVBAoTBU5v
a2lhMRYwFAYDVQQLEw1Db250YWluZXIgbGFiMRQwEgYDVQQDEwtlbGsgUm9vdCBD
QTAeFw0yMzAyMTIxMDI5MDBaFw0yNDAyMTIxMDI5MDBaMF4xCzAJBgNVBAYTAkJF
MRAwDgYDVQQHEwdBbnR3ZXJwMQ4wDAYDVQQKEwVOb2tpYTEWMBQGA1UECxMNQ29u
dGFpbmVyIGxhYjEVMBMGA1UEAxMMbGVhZjIuZWxrLmlvMIIBIjANBgkqhkiG9w0B
AQEFAAOCAQ8AMIIBCgKCAQEAv5MZ2HQqwgzrdpYY+UDODQ5GCZ3ap7yrQEzouf3L
WRAla+o294YDZH3ZR/iskr7PLIbP8N35J0q9iAFEWxtauFYSA9buVaz88iJQ2VIx
/8X2ILg5479au8mgOEWInwWHV+knhfo4LEUH89+s5cq8i1c1LioUgL3ozxzokXF4
riGxztgWvNGXX9+UjUMluVJ2T26fbWNpyCSIMv/9lpIgZmwNIZyTLVlnc9Di3RqN
eTyEGkzgkyjaR/xQLolBEjDkaZ7lPAl0wHPOrAST7/eOX3T2doyAeT4DLLUGD46u
gRMW7vQcmQLddav7AvH/CeHxSXYOsdcRX6Y4KryxXfrl0QIDAQABo4GnMIGkMA4G
A1UdDwEB/wQEAwIFoDAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwDAYD
VR0TAQH/BAIwADAdBgNVHQ4EFgQURzQ5yWVkfNuCjPMD/dlfMRFOm98wHwYDVR0j
BBgwFoAUMakHsUqE3WDgvC4dLyq4D0c8aJ0wJQYDVR0RBB4wHIIFbGVhZjKCBWxl
YWYyggxsZWFmMi5lbGsuaW8wDQYJKoZIhvcNAQELBQADggEBAJtQhXG0Z0IvJCUf
EY86Lu21iQMs6GuLg6kVi4fQypT7oZdVHKwsZ8DWezw9kuQJFLL7VOK/h8T/q2Q0
uKyUdE2v47LMLaieKoAm4n4kTlae8Pf+/UYmKuX/oB4KTy1ICZeXqlztp+dHAaeG
OSDy2rn/1fYBcf8X5puJQJJ0Gdj+ZPyeetm+1ikb/9AIMP/zltjxtSfIi0Upw3/Q
e374ZZYMw2s+5AsogSdsi+472+EYww1vMxVWHVEJ+zCnJ5kshZl0mFyTD6QFo17y
seQe0Me5SWWapgFg8BgJYYxUKMcTXCdboDpcckgwIqtzzvPKiGjkU9kM8YJuAnK0
3OSxMd4=
-----END CERTIFICATE-----
"
                authenticate-client false
            }
        }
        json-rpc-server {
            admin-state enable
            network-instance mgmt {
                http {
                    admin-state enable
                }
                https {
                    admin-state enable
                    tls-profile clab-profile
                }
            }
        }
        clock {
            timezone Europe/Rome
        }
        ssh-server {
            network-instance mgmt {
                admin-state enable
            }
        }
        banner {
            login-banner "................................................................
:                  Welcome to Nokia SR Linux!                  :
:              Open Network OS for the NetOps era.             :
:                                                              :
:    This is a freely distributed official container image.    :
:                      Use it - Share it                       :
:                                                              :
: Get started: https://learn.srlinux.dev                       :
: Container:   https://go.srlinux.dev/container-image          :
: Docs:        https://doc.srlinux.dev/22-6                    :
: Rel. notes:  https://doc.srlinux.dev/rn22-6-4                :
: YANG:        https://yang.srlinux.dev/v22.6.4                :
: Discord:     https://go.srlinux.dev/discord                  :
: Contact:     https://go.srlinux.dev/contact-sales            :
................................................................
"
        }
        logging {
            network-instance mgmt
            buffer messages {
                rotate 3
                size 10000000
                facility local6 {
                    priority {
                        match-above informational
                    }
                }
            }
            buffer system {
                facility auth {
                    priority {
                        match-above warning
                    }
                }
                facility cron {
                    priority {
                        match-above warning
                    }
                }
                facility daemon {
                    priority {
                        match-above warning
                    }
                }
                facility ftp {
                    priority {
                        match-above warning
                    }
                }
                facility kern {
                    priority {
                        match-above warning
                    }
                }
                facility lpr {
                    priority {
                        match-above warning
                    }
                }
                facility mail {
                    priority {
                        match-above warning
                    }
                }
                facility news {
                    priority {
                        match-above warning
                    }
                }
                facility syslog {
                    priority {
                        match-above warning
                    }
                }
                facility user {
                    priority {
                        match-above warning
                    }
                }
                facility uucp {
                    priority {
                        match-above warning
                    }
                }
                facility local0 {
                    priority {
                        match-above warning
                    }
                }
                facility local1 {
                    priority {
                        match-above warning
                    }
                }
                facility local2 {
                    priority {
                        match-above warning
                    }
                }
                facility local3 {
                    priority {
                        match-above warning
                    }
                }
                facility local4 {
                    priority {
                        match-above warning
                    }
                }
                facility local5 {
                    priority {
                        match-above warning
                    }
                }
                facility local7 {
                    priority {
                        match-above warning
                    }
                }
            }
            file messages {
                rotate 3
                size 10000000
                facility local6 {
                    priority {
                        match-above warning
                    }
                }
            }
            remote-server 172.22.22.11 {
                transport udp
                remote-port 1514
                subsystem aaa {
                    priority {
                        match-above informational
                    }
                }
                subsystem acl {
                    priority {
                        match-above informational
                    }
                }
                subsystem bfd {
                    priority {
                        match-above informational
                    }
                }
                subsystem bgp {
                    priority {
                        match-above informational
                    }
                }
                subsystem bridgetable {
                    priority {
                        match-above informational
                    }
                }
                subsystem chassis {
                    priority {
                        match-above informational
                    }
                }
                subsystem evpn {
                    priority {
                        match-above informational
                    }
                }
                subsystem fib {
                    priority {
                        match-above informational
                    }
                }
                subsystem gnmi {
                    priority {
                        match-above informational
                    }
                }
                subsystem lag {
                    priority {
                        match-above informational
                    }
                }
                subsystem linux {
                    priority {
                        match-above informational
                    }
                }
                subsystem lldp {
                    priority {
                        match-above informational
                    }
                }
                subsystem mgmt {
                    priority {
                        match-above informational
                    }
                }
                subsystem platform {
                    priority {
                        match-above informational
                    }
                }
                subsystem vxlan {
                    priority {
                        match-above informational
                    }
                }
            }
        }
        network-instance {
            protocols {
                evpn {
                    ethernet-segments {
                        bgp-instance 1 {
                            ethernet-segment client2 {
                                admin-state enable
                                esi 00:0a:00:00:03:00:00:00:00:01
                                multi-homing-mode single-active
                                interface lag1 {
                                }
                                df-election {
                                    interface-standby-signaling-on-non-df {
                                    }
                                    algorithm {
                                        type preference
                                        preference-alg {
                                            preference-value 100
                                            capabilities {
                                                ac-df exclude
                                                non-revertive true
                                            }
                                        }
                                    }
                                }
                                routes {
                                    next-hop use-system-ipv4-address
                                    ethernet-segment {
                                        originating-ip use-system-ipv4-address
                                    }
                                }
                            }
                        }
                    }
                }
                bgp-vpn {
                    bgp-instance 1 {
                    }
                }
            }
        }
    }
    network-instance MAC-VRF-3 {
        type mac-vrf
        admin-state enable
        description "Network 172.16.3.0/24"
        interface lag1.0 {
        }
        vxlan-interface vxlan3.1 {
        }
        protocols {
            bgp-evpn {
                bgp-instance 1 {
                    admin-state enable
                    vxlan-interface vxlan3.1
                    evi 3
                    ecmp 2
                    routes {
                        bridge-table {
                            next-hop use-system-ipv4-address
                            mac-ip {
                                advertise true
                            }
                            inclusive-mcast {
                                advertise true
                            }
                        }
                    }
                }
            }
            bgp-vpn {
                bgp-instance 1 {
                    route-target {
                        export-rt target:65501:3
                        import-rt target:65501:3
                    }
                }
            }
        }
    }
    network-instance default {
        interface ethernet-1/1.1 {
        }
        interface ethernet-1/2.1 {
        }
        interface system0.0 {
        }
        protocols {
            bgp {
                autonomous-system 64602
                router-id 10.0.0.2
                group ebgp-underlay {
                    admin-state enable
                    export-policy export-to-underlay
                    import-policy import-from-underlay
                    peer-as 65177
                    failure-detection {
                        fast-failover true
                    }
                    timers {
                        connect-retry 10
                        hold-time 3
                        keepalive-interval 1
                        minimum-advertisement-interval 1
                    }
                }
                group ibgp-evpn {
                    admin-state enable
                    export-policy export-all
                    import-policy import-all
                    peer-as 65501
                    failure-detection {
                        enable-bfd true
                        fast-failover true
                    }
                    ipv4-unicast {
                        admin-state disable
                    }
                    ipv6-unicast {
                        admin-state disable
                    }
                    evpn {
                        admin-state enable
                    }
                    local-as 65501 {
                    }
                    timers {
                        connect-retry 10
                        hold-time 3
                        keepalive-interval 1
                        minimum-advertisement-interval 1
                    }
                    transport {
                        tcp-mss 1460
                        local-address 10.0.0.2
                    }
                }
                ipv4-unicast {
                    multipath {
                        allow-multiple-as true
                        max-paths-level-1 64
                        max-paths-level-2 64
                    }
                }
                evpn {
                    rapid-update true
                }
                neighbor 10.0.0.5 {
                    admin-state enable
                    peer-group ibgp-evpn
                }
                neighbor 10.0.0.6 {
                    admin-state enable
                    peer-group ibgp-evpn
                }
                neighbor 10.1.2.5 {
                    admin-state enable
                    peer-as 65177
                    peer-group ebgp-underlay
                }
                neighbor 10.1.2.7 {
                    admin-state enable
                    peer-as 65177
                    peer-group ebgp-underlay
                }
                route-advertisement {
                    rapid-withdrawal true
                    wait-for-fib-install true
                }
            }
        }
    }
    network-instance mgmt {
        type ip-vrf
        admin-state enable
        description "Management network instance"
        interface mgmt0.0 {
        }
        protocols {
            linux {
                import-routes true
                export-routes true
                export-neighbors true
            }
        }
    }
    routing-policy {
        prefix-set loopbacks {
            prefix 10.0.0.0/24 mask-length-range 32..32 {
            }
        }
        policy export-all {
            default-action {
                policy-result accept
            }
        }
        policy export-to-underlay {
            default-action {
                policy-result reject
            }
            statement 10 {
                match {
                    prefix-set loopbacks
                }
                action {
                    policy-result accept
                }
            }
            statement 20 {
                match {
                    family [
                        ipv4-unicast
                    ]
                }
                action {
                    policy-result accept
                }
            }
        }
        policy import-all {
            default-action {
                policy-result accept
            }
        }
        policy import-from-underlay {
            default-action {
                policy-result reject
            }
            statement 10 {
                match {
                    prefix-set loopbacks
                }
                action {
                    policy-result accept
                }
            }
            statement 20 {
                match {
                    family [
                        ipv4-unicast
                    ]
                }
                action {
                    policy-result accept
                }
            }
        }
        policy import-from-underlaydefault-action {
        }
    }
    tunnel-interface vxlan3 {
        vxlan-interface 1 {
            type bridged
            ingress {
                vni 3
            }
            egress {
                source-ip use-system-ipv4-address
            }
        }
    }
